Precedent P2. Формирование интерактивного отчёта о выработке за определённый период.
====================================================================================

Пользователь дает команду системе показать отчёт о выработке сотрудников предприятия.
Система запрашивает данные из Хранилища, производит вычисления и отображает результаты.
В любой момент пользователь может изменить расчетный период. Система изменит результаты
без дополнительной команды.

#### Frame. 
Приложение автоматизации контроля управления персоналом WorkSpeed.

#### Level.
Defined user task.

#### Primary actor.
Manager

#### Interested Parties.
- Manager. Хочет получить возможность получать отчёт более полным за больший период времени.

### Preconditions.
* Приложение запущено. (Система запущена)
* В БД храняться действия сотрудников за выбранный период.

### Postcondition.
Система вывела на экран отчёт.

### The Main Successfull Scenario.
1. Система читает из БД действия с ненулевой длительностью операций за выбранный период сгруппированные по сотрудникам и отсортированные по StartTime по убыванию.

2. Определяется период действия.
>
> 2а. Gathering, Defragmentation, Shipment, Other, Inventory, Placing
    >> 1. Сохраняется период операции.
>
> 2б. Packing.
    >> 1. Сравниваем длительность операции и произведение количества штук товара на Коэф. упаковки (7,8,9,10).
    >>> 1а. Длительность операции меньше произведения.
        >>>> 1. Меняем длительность операции на произведение
>  
> 2в. BuyerGathering
    >> 1. Анализируется объём.
    >>> 1а. Объём менее 5 л.
        >>>> 1. Прибовляем 30 с.
    >>> 1б. Объём более 5 л.
        >>>> 1. Прибавляем 1 мин.
>
> 2д. Reception.
    >> 1. Прибавляем 10 с.

3. Определяется следующая операция
> 3а. Следующая операция отсутствует
    >> 1. Пропускаем шаг.

4. Определяется период паузы между текущим и следующим действием.
> \*а. Пауза меньше порогового значения текущей операции и больше либо равна нулевому периоду
    >> 1. Период паузы добавляется к периоду текущей операции
> \*б. Пауза с периодом большим значения порога
    >> 1. К текущей операции добавляется порог.
    >> 2. Из паузы вычитается значение порога

> 4а. Пауза отрицательная. Текущая операция - Packaging
    >> 1. Конец операции ставится в соответствие началу следующей

> 4б. Пауза отрицательная. Текущая операция - не Packaging, следующая - Packaging
    >> 1. Начало следующей операции ставится в соответствие концу текущей

> 4в. Пауза отрицательная. Текущая операция - не Packaging, следующая - не Packaging
    >> 1. Длительность текущей операции усекается до начала следующей

5. Паза сохраняется во времени простоя
> 5а. Пауза отсутствует
    >> 1. Шаг пропустается

6. Определяются и сохраняются количественные показатели действия.
7. Повторяются пункты 2 - 6.
8. Вычитаются перерывы из времени простоя, начиная с первой паузы.
> 8а. В период перерыва нет паузы неменьшей длины
    >> 1. Вычитается перерыв из первой подходящей по длине паузы, если она заканчивается до начала времени следующего перерыва.
7. Определяются смены (имеются паузы более 5-ти часов).
8. Из времени простоя не меньшего длительности обеда вычитается время обеда.

### The Alternative Scenarios.
\*a. При выходе системы из строя.     
> 1. Очистка результатов.
> 2. Сообщение об ошибке.     
